//===================================================================================================
/*
UNIVERSIDADE FEDERAL DE UBERLÂNDIA
INSTITUTO DE MATEMÁTICA E DE ESTATÍSTICA
DISCIPLINA: CÁLCULO NUMÉRICO (FAMAT31032)
CURSO: CIÊNCIA DA COMPUTAÇÃO
CÓDIGO: MÉTODO DA BISSECÇÃO
*/
//===================================================================================================
/* PRÉ PROCESSADORES */
//===================================================================================================
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
//===================================================================================================
/* SUB-ROTINA */
//===================================================================================================
double f (double x) {
    return (x - cos(x));
}
//===================================================================================================
/* PROGRAMA PRINCIPAL */
//===================================================================================================
int main(int argc, char *argv[]) {
    //===============================================================================================
    /* DECLARAÇÃO DE VARIÁVEIS */
    //===============================================================================================
    int k; // contador do número de iterações
    double a, b; // intervalo que contém a solução
    double x; // ponto médio do intervalo [a, b]
    double eps; // precisão (acurácia)
    //===============================================================================================
    /* LIMPEZA DO TERMINAL */
    //===============================================================================================
    system("cls");
    //===============================================================================================
    /* ENTRADA DE DADOS */
    //===============================================================================================
    a = atof(argv[1]); // atof converte um argumento para um número real e atribui à variavel, função de conversão
    b = atof(argv[2]);
    eps = atof(argv[3]);
    //===============================================================================================
    /* APLICAÇÃO DO MÉTODO DA BISSECÇÃO */
    //===============================================================================================
    k = 0;
    while(fabs (b-a) > eps) { // função fabs é a função módulo
        k++;
        x = 0.5 * (a+b); 
        if(f(a)*f(x) < 0.0) {
            b = x;
        } else {
            a = x;
        }
    } 
    x = 0.5 * (a+b);
    //===============================================================================================
    /* IMPRESSÃO DOS RESULTADOS */
    //===============================================================================================
    printf("\nAproximacao de x: %.15lf", x);
    printf("\nf(x): %e", f(x));
    printf("\nNumero de iteracoes: %d", k);
    //===============================================================================================
    /* FIM DO PROGRAMA */
    //===============================================================================================
    return 0;
}
/* PARÂMETROS DE COMPILAÇÃO 
gcc -o mb mb.c -lm
-O3 faz o código rodar mais rápido mas ataca a precisão
-Wall acusa variáveis não utilizadas
./mb argumentos: 0.0 1.0 1e-10(1*10^-10)
*/