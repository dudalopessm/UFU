//===================================================================================================
/*
UNIVERSIDADE FEDERAL DE UBERLÂNDIA
INSTITUTO DE MATEMÁTICA E DE ESTATÍSTICA
DISCIPLINA: CÁLCULO NUMÉRICO (FAMAT31032)
CURSO: CIÊNCIA DA COMPUTAÇÃO
CÓDIGO: REGRA DOS TRAPÉZIOS REPETIDA (RTR)
*/
//===================================================================================================
/* PRÉ PROCESSADORES */
//===================================================================================================
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
//===================================================================================================
/* SUB-ROTINAS */
//===================================================================================================
// FUNÇÃO f(x)
double f (double x) {
    return (exp(-pow(x,2))); //e^-x^2
}
//===================================================================================================
/* PROGRAMA PRINCIPAL */
//===================================================================================================
int main(int argc, char *argv[]) {
    //===============================================================================================
    /* DECLARAÇÃO DE VARIÁVEIS */
    //===============================================================================================
    int k; // índice auxiliar para o somatório
    int N; // número de divisões do intervalo [a,b]
    double a, b; // intervalo de integração
    double h; // espaçamento entre pontos 
    double s; // variável auxiliar para armazenar a soma
    double I; // variável que armazena o resultado final
    double x; // variável auxiliar
    //===============================================================================================
    /* LIMPEZA DO TERMINAL */
    //===============================================================================================
    system("cls");
    //===============================================================================================
    /* ENTRADA DE DADOS */
    //===============================================================================================
    a = atof(argv[1]);
    b = atof(argv[2]);
    N = atoi(argv[3]);
    //===============================================================================================
    /* ESPAÇAMENTO */
    //===============================================================================================
    h = (b-a)/N;
    //===============================================================================================
    /* APLICAÇÃO DA REGRA DOS TRAPÉZIOS REPETIDA */
    //===============================================================================================
    s = 0.0;
    for(k = 1; k < N; k++) { // cálculo do somatório
        x = a + k*h;
        s += f(x);
    }
    I = 0.5 * h * (f(a)+f(b)+2.0*s);
    //===============================================================================================
    /* IMPRESSÃO DOS RESULTADOS */
    //===============================================================================================
    printf("\nAproximacao da integral: %.15lf", I);
    //===============================================================================================
    /* FIM DO PROGRAMA */
    //===============================================================================================
    return 0;
}
// gcc -O3 -o rtr rtr.c -lm
// ./rtr -1.0 1.0 2000000